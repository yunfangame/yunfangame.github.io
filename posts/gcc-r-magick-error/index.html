<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />
    <title>NavPage Hugo Theme</title>
    <link rel="shortcut icon" href="/imgs/px.png" />
    <meta name="keywords" content="NavPage Hugo Theme" />
    
    <link rel="stylesheet" id="block-library-css" href="/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/css/iconfont-3.03029.1.css" type="text/css" media="all" />
    <link rel="stylesheet" id="bootstrap-css" href="/css/bootstrap.min-4.3.1.css" type="text/css" media="all" />
    <link rel="stylesheet" id="fancybox-css" href="/css/fancybox.min-3.5.7.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iowen-css" href="/css/style-3.03029.1.css" type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/css/custom-style.css" type="text/css" media="all" />
    <link rel="stylesheet" id="fortawesome-css" href="/fontawesome-6.7.1/css/all.min.css" type="text/css" />
    <script type="text/javascript" src="/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/js/content-search.js" id="content-search-js"></script>

    
    <script>
        
    </script>
    

    
    
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>LA.init({id:"3JHwtbgyvMReDNFU",ck:"3JHwtbgyvMReDNFU"})</script>    
     
    

    
    
    

</head>


<div class="main-content flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="NavPage Hugo Theme">
                        <img src="https://yunfangame.github.io/images/px-collapse.png" class="logo-light"
                            alt="NavPage Hugo Theme">
                        <img src="https://yunfangame.github.io/images/px-collapse.png" class="logo-dark d-none"
                            alt="NavPage Hugo Theme">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu">
                        
			    <li >
			        
			        <a href="/./"><i class="fa fa-home fa-lg mr-2"></i><span>首页</span></a>
				
				
				
				
			    </li>
			
			    <li >
			        
			        <a href="/./about/"><i class="fab fa-hive fa-lg mr-2"></i><span>作者</span></a>
				
				
				
				
			    </li>
			
			    <li >
			        
			        <a href="/./posts/"><i class="fa fa-book fa-lg mr-2"></i><span>文章</span></a>
				
				
				
				
			    </li>
			
			    <li >
			        
			        <a href="/./cat/"><i class="fa-solid fa-trophy fa-lg mr-2"></i><span>娱乐</span></a>
				
				
				
				
			    </li>
			
			    <li class="menu-item-has-children">
			        
				<a href=""><i class="fa fa-cog fa-lg mr-2"></i><span>关于</span></a>
			        
				
				<ul class="sub-menu">
				
				
				    
				    <li><a href="https://github.com/PagesX">教程</a></li>
				    
				
				    
				    <li><a href="https://github.com/PagesX">源码</a></li>
				    
				
				
				</ul>
				
			    </li>
			
			</ul>

                        

<div id="tp-weather-widget"></div>
  <script>
    (function(a,h,g,f,e,d,c,b){b=function(){d=h.createElement(g);c=h.getElementsByTagName(g)[0];d.src=e;d.charset="utf-8";d.async=1;c.parentNode.insertBefore(d,c)};a["SeniverseWeatherWidgetObject"]=f;a[f]||(a[f]=function(){(a[f].q=a[f].q||[]).push(arguments)});a[f].l=+new Date();if(a.attachEvent){a.attachEvent("onload",b)}else{a.addEventListener("load",b,false)}}(window,document,"script","SeniverseWeatherWidget","//cdn.sencdn.com/widget2/static/js/bundle.js?t="+parseInt((new Date().getTime() / 100000000).toString(),10)));
    window.SeniverseWeatherWidget('show', {
      flavor: "slim",
      location: "WS0UW38KR4ZC",
      geolocation: true,
      language: "auto",
      unit: "c",
      theme: "auto",
      token: "10c4daf3-6a05-4d21-b26f-2c0b9349ee8b",
      hover: "enabled",
      container: "tp-weather-widget"
    })
  </script>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        

                        
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal" data-target="#sidebar">
                                <i class="iconfont icon-classification icon-2x"></i>
			    </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>


<body class="page-body boxed-container">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        <h1 class="mt-5">GCC 版本不一致导致的 R magick 包安装错误</h1>
        <div class="content">
            <p>在安装 Y 叔的 <code>yyplot</code> 时候，发现 <code>magick</code> 依赖包安装的时候的一些棘手问题，特此记录一下。</p>
<!-- more -->
<h2 id="r-403-安装">R-4.0.3 安装</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">library</span>(remotes)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> remotes<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;GuangchuangYu/yyplot&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span> installing <span style="color:#f92672">*</span>source<span style="color:#f92672">*</span> package ‘magick’ <span style="color:#66d9ef">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> package ‘magick’ successfully unpacked and MD5 sums checked
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> using staged installation
</span></span><span style="display:flex;"><span>Package Magick<span style="color:#f92672">++</span> was not found <span style="color:#66d9ef">in</span> the pkg<span style="color:#f92672">-</span>config search path.
</span></span><span style="display:flex;"><span>Perhaps you should add the directory containing `Magick<span style="color:#f92672">+</span><span style="color:#ae81ff">+.</span>pc<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">to the PKG_CONFIG_PATH environment variable
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">No package &#39;</span>Magick<span style="color:#f92672">++</span><span style="color:#e6db74">&#39; found
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Using PKG_CFLAGS=
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Using PKG_LIBS=-lMagick++-6.Q16 -lMagickWand-6.Q16 -lMagickCore-6.Q16
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">--------------------------- [ANTICONF] --------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Configuration failed to find the Magick++ library. Try installing:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> - deb: libmagick++-dev (Debian, Ubuntu)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> - rpm: ImageMagick-c++-devel (Fedora, CentOS, RHEL)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> - brew: imagemagick or imagemagick@6 (MacOS)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">If Magick++ is already installed, check that &#39;</span>pkg<span style="color:#f92672">-</span>config<span style="color:#e6db74">&#39; is in your
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">PATH and PKG_CONFIG_PATH contains a Magick++.pc file. If pkg-config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">is unavailable you can set INCLUDE_DIR and LIB_DIR manually via:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">R CMD INSTALL --configure-vars=&#39;</span>INCLUDE_DIR<span style="color:#f92672">=</span><span style="color:#66d9ef">...</span> LIB_DIR<span style="color:#f92672">=</span><span style="color:#66d9ef">...</span><span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-------------------------- [ERROR MESSAGE] ---------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;stdin&gt;:1:22: fatal error: Magick++.h: No such file or directory
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">compilation terminated.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">--------------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ERROR: configuration failed for package ‘magick’
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">* removing ‘/home/shenweiyan/software/R/R-4.0.3/lib64/R/library/magick’
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Error: Failed to install &#39;</span>yyplot<span style="color:#e6db74">&#39;</span><span style="color:#960050;background-color:#1e0010"> from GitHub:</span>
</span></span><span style="display:flex;"><span>  (converted from warning) installation of package ‘magick’ had non<span style="color:#f92672">-</span>zero exit status
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">quit</span>()
</span></span><span style="display:flex;"><span>Save workspace image<span style="color:#f92672">?</span> [y<span style="color:#f92672">/</span>n<span style="color:#f92672">/</span>c]<span style="color:#f92672">:</span> n
</span></span></code></pre></div><p>仅在 Bash 环境配置了 <code>PATH</code> 和 <code>PKG_CONFIG_PATH</code> 是不够的，安装过程会提示动态库的问题。</p>
<pre tabindex="0"><code># export PATH=/home/shenweiyan/software/ImageMagick-7.0.10/bin:$PATH
# export PKG_CONFIG_PATH=/home/shenweiyan/software/ImageMagick-7.0.10/lib/pkgconfig:$PKG_CONFIG_PATH
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">library</span>(remotes)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> remotes<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;GuangchuangYu/yyplot&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> R
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> inst
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> byte<span style="color:#f92672">-</span>compile and prepare package <span style="color:#66d9ef">for</span> lazy loading
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> help
</span></span><span style="display:flex;"><span><span style="color:#f92672">***</span> installing help indices
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> building package indices
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> installing vignettes
</span></span><span style="display:flex;"><span><span style="color:#f92672">**</span> testing <span style="color:#66d9ef">if</span> installed package can be loaded from temporary location
</span></span><span style="display:flex;"><span>Error<span style="color:#f92672">:</span> package or namespace load failed <span style="color:#66d9ef">for</span> ‘magick’ <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">dyn.load</span>(file, DLLpath <span style="color:#f92672">=</span> DLLpath, <span style="color:#66d9ef">...</span>)<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span> unable to load shared object <span style="color:#e6db74">&#39;/home/shenweiyan/software/R/R-4.0.3/lib64/R/library/00LOCK-magick/00new/magick/libs/magick.so&#39;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  libMagick<span style="color:#f92672">++</span><span style="color:#ae81ff">-7</span>.Q16HDRI.so.4<span style="color:#f92672">:</span> cannot open shared object file<span style="color:#f92672">:</span> No such file or directory
</span></span><span style="display:flex;"><span>Error<span style="color:#f92672">:</span> loading failed
</span></span><span style="display:flex;"><span>Execution halted
</span></span><span style="display:flex;"><span>ERROR<span style="color:#f92672">:</span> loading failed
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span> removing ‘<span style="color:#f92672">/</span>home<span style="color:#f92672">/</span>shenweiyan<span style="color:#f92672">/</span>software<span style="color:#f92672">/</span>R<span style="color:#f92672">/</span>R<span style="color:#ae81ff">-4.0.3</span><span style="color:#f92672">/</span>lib64<span style="color:#f92672">/</span>R<span style="color:#f92672">/</span>library<span style="color:#f92672">/</span>magick’
</span></span><span style="display:flex;"><span>Error<span style="color:#f92672">:</span> Failed to install <span style="color:#e6db74">&#39;yyplot&#39;</span> from GitHub<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  (converted from warning) installation of package ‘magick’ had non<span style="color:#f92672">-</span>zero exit status
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">quit</span>()
</span></span><span style="display:flex;"><span>Save workspace image<span style="color:#f92672">?</span> [y<span style="color:#f92672">/</span>n<span style="color:#f92672">/</span>c]<span style="color:#f92672">:</span> n
</span></span></code></pre></div><p>最终解决方案：</p>
<ol>
<li>手动安装 <code>ggimage_0.3.1</code>。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pkg <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;http://cran.r-project.org/src/contrib/Archive/ggimage/ggimage_0.3.1.tar.gz&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(pkg, repos<span style="color:#f92672">=</span><span style="color:#66d9ef">NULL</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;source&#34;</span>)
</span></span></code></pre></div><ol start="2">
<li>配置必要环境。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export PATH<span style="color:#f92672">=</span>/home/shenweiyan/software/ImageMagick-7.0.10/bin:$PATH
</span></span><span style="display:flex;"><span>export PKG_CONFIG_PATH<span style="color:#f92672">=</span>/home/shenweiyan/software/ImageMagick-7.0.10/lib/pkgconfig:$PKG_CONFIG_PATH
</span></span><span style="display:flex;"><span>export LD_LIBRARY_PATH<span style="color:#f92672">=</span>/home/shenweiyan/software/ImageMagick-7.0.10/lib:$LD_LIBRARY_PATH
</span></span></code></pre></div><ol start="3">
<li>安装。根据提示，先安装缺失的 <code>meme</code> 包，然后再安装 <code>yyplot</code>。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">library</span>(remotes)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">options</span>(<span style="color:#e6db74">&#34;repos&#34;</span><span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(CRAN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#39;meme&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> remotes<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;GuangchuangYu/yyplot&#34;</span>)
</span></span></code></pre></div><h2 id="r-430-安装">R-4.3.0 安装</h2>
<p>R-4.3.0 安装 <code>magick_2.8.4</code> 会出现 <a href="https://github.com/ropensci/magick/issues/166">ropensci/magick#166</a> 的问题。根据 <a href="https://github.com/ropensci/magick/issues/166#issuecomment-457875591">ropensci/magick#166#issuecomment-457875591</a> 的描述，<strong>编译 ImageMagick 的 gcc 需要跟编译 R 的 gcc 保持版本一致</strong>。</p>
<ol>
<li>重新编译安装 ImageMagick</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://download.imagemagick.org/archive/releases/ImageMagick-7.0.10-24.tar.xz
</span></span><span style="display:flex;"><span>extract ImageMagick-7.0.10-24.tar.xz
</span></span><span style="display:flex;"><span>cd ImageMagick-7.0.10-24
</span></span><span style="display:flex;"><span>./configure CC<span style="color:#f92672">=</span>/home/shenweiyan/software/gcc-7.3.0/bin/gcc CXX<span style="color:#f92672">=</span>/home/shenweiyan/software/gcc-7.3.0/bin/g++ --prefix<span style="color:#f92672">=</span>/home/shenweiyan/software/ImageMagick-7.0.10-24
</span></span><span style="display:flex;"><span>make 
</span></span><span style="display:flex;"><span>make install
</span></span></code></pre></div><ol start="2">
<li>安装 <code>magick</code> 包</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># export PATH=/home/shenweiyan/software/ImageMagick-7.0.10-24/bin:$PATH</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># export PKG_CONFIG_PATH=/home/shenweiyan/software/ImageMagick-7.0.10-24/lib/pkgconfig:$PKG_CONFIG_PATH</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># export LD_LIBRARY_PATH=/home/shenweiyan/software/ImageMagick-7.0.10-24/lib:$LD_LIBRARY_PATH</span>
</span></span><span style="display:flex;"><span>/home/shenweiyan/software/R/R-4.3.0/bin/R
</span></span><span style="display:flex;"><span>&gt; options<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;repos&#34;</span><span style="color:#f92672">=</span>c<span style="color:#f92672">(</span>CRAN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&#34;</span><span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>&gt; install.packages<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;magick&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ol start="3">
<li>根据提示，先安装缺失的 <code>meme</code> 包，然后再安装 <code>yyplot</code>。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">library</span>(remotes)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">options</span>(<span style="color:#e6db74">&#34;repos&#34;</span><span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(CRAN<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#39;meme&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> remotes<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;GuangchuangYu/yyplot&#34;</span>)
</span></span></code></pre></div>
        </div>
    </div>
    </main>

    <link rel="stylesheet" id="custom-single" href="https://yunfangame.github.io/css/custom-single.css" type="text/css" media="all" />
    

        <footer class="main-footer footer-type-1 text-xs">
            <div id="footer-tools" class="d-flex flex-column">
                <a href="javascript:" id="go-to-up" class="btn rounded-circle go-up m-1" rel="go-top">
                    <i class="iconfont icon-to-up"></i>
                </a>
                
                <a href="javascript:" data-toggle="modal" data-target="#search-modal" class="btn rounded-circle m-1"
                    rel="search" one-link-mark="yes">
                    <i class="iconfont icon-search"></i>
                </a>
                <a href="https://www.yuque.com/shenweiyan" class="btn rounded-circle kefu m-1" target="_blank" data-toggle="tooltip" data-placement="left" title="联系我们">
                    <i class="mode-ico iconfont icon-qq"></i>
                </a>
                
                
		<a href="javascript:" onclick="window.location.href='javascript:switchNightMode()'" class="btn rounded-circle switch-dark-mode m-1" id="yejian"
                    data-toggle="tooltip" data-placement="left" title="日间模式">
                    <i class="mode-ico iconfont icon-night"></i>
                </a>
                
            </div>
            <div class="footer-inner">
                <div class="footer-text">© 2021 - 2025 By <a href="https://github.com/PagesX">NavPage-Hugo-Theme</a> | <a href="https://github.com/BioITee">Bio IT 爱好者</a> | <a href="http://beian.miit.gov.cn/">粤ICP备16023717号</a> | <a href="https://app.netlify.com/">Netlify</a> <br/>本站内容源自互联网，如有内容侵犯了你的权益，请联系删除相关内容，联系邮箱：<a href="mailto:shenweiyan@aliyun.com?subject=NavPage-Hugo网址导航意见反馈" target="_blank"><a href="mailto:shenweiyan@aliyun.com">shenweiyan@aliyun.com</a></a> <br/><script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3JHwtbgyvMReDNFU/quote.js?theme=#1690FF,#282A2D,#282A2D,#E87371,#FFFFFF,#1690FF,12&f=12&display=1,0,1,1,1,1,1,1"></script></div>
            </div>
        </footer>
    </div>
</div>


<script type='text/javascript' src='https://yunfangame.github.io/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='https://yunfangame.github.io/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>

<script type='text/javascript' id='popper-js-extra'>
 
var theme = {"ajaxurl":"","addico":"https:\/\/example.com\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":""};
 
</script>


<script type='text/javascript' src='https://yunfangame.github.io/js/app-mini.js' id='appmini-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600); 
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background-image", "url(imgs\/bg-dna.jpg)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background-image", "url(imgs\/bg-dna.jpg)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background-image", "url(imgs\/bg-dna.jpg)")
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>
</body>
</html>

